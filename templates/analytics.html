<!DOCTYPE html>
<html lang="en" dir="ltr">

<head>
    <meta charset="utf-8">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css"/>
    <style>
        @import url('https://fonts.googleapis.com/css?family=Roboto:300,400,400i,500');
        *{
        padding: 0;
        margin: 0;
        list-style: none;
        text-decoration: none;
        }

        body {
        font-family: 'Roboto', sans-serif;
        }

        .sidebar {
        position: fixed;
        left: -250px;
        width: 250px;
        height: 100%;
        background: #ffffff;
        transition: all .5s ease;
        border-right: 1px solid black;
        }

        .sidebar header a {
            display: flex;
            align-items: center;
            text-decoration: none;
            color: black;
        }

        .sidebar header img {
            height: 60px;
            margin-right: 15px;
        }

        .sidebar header {
        font-size: 20px;
        color: rgb(0, 0, 0);
        line-height: 70px;
        text-align: center;
        background: #ffffff;
        user-select: none;
        }

        .sidebar ul a{
        display: block;
        height: 100%;
        width: 100%;
        line-height: 65px;
        font-size: 20px;
        color: rgb(0, 0, 0);
        padding-left: 40px;
        box-sizing: border-box;
        border-bottom: 1px solid black;
        border-top: 1px solid rgba(255,255,255,.1);
        transition: .4s;
        }

        ul li:hover a{
        padding-left: 50px;
        }

        .sidebar ul a i{
        margin-right: 16px;
        }

        #check{
        display: none;
        }

        label #btn,label #cancel{
        position: absolute;
        color: #2596be;
        border-radius: 3px;
        cursor: pointer;
        }

        label #btn{
        left: 40px;
        top: 25px;
        font-size: 35px;
        color: rgb(0, 0, 0);
        padding: 6px 12px;
        transition: all .5s;
        }

        label #cancel{
        z-index: 1111;
        left: -195px;
        top: 17px;
        font-size: 30px;
        color: #000000;
        padding: 4px 9px;
        transition: all .5s ease;
        }

        #check:checked ~ .sidebar{
        left: 0;
        }

        #check:checked ~ label #btn{
        left: 250px;
        opacity: 0;
        pointer-events: none;
        }

        #check:checked ~ label #cancel{
        left: 195px;
        }

        #check:checked ~ section{
        margin-left: 250px;
        }

        section {
        width: 100vw; /* Use full viewport width */
        height: 100vh; /* Use full viewport height */
        margin: 0; /* Remove default margin */
        padding: 0; /* Remove default padding */
        overflow: auto; /* Add scrollbars if content exceeds viewport */
        background: #f0f0f0; /* Background color (change as needed) */
        }

        .navigation-button {
            background-color: transparent;
            border: none;
            cursor: pointer;
            padding: 0;
            left: 40px;
            top: 25px;
            font-family: 'Roboto', sans-serif;
            font-size: 20px;
            color: rgb(0, 0, 0);
            margin: 0;
            transition: padding-left 0.4s;
            text-align: left;
            width: 100%;
            position: relative;
        }

        /* Hover effect for the navigation buttons */
        .navigation-button:hover {
            padding-left: 10px; /* Adjust padding as needed */
        }

        .tabs {
            display: flex;
            list-style-type: none;
            margin: 0;
            padding: 0;
            background-color: #f1f1f1;
        }

        .tab {
            flex: 1;
            padding: 10px;
            text-align: center;
            cursor: pointer;
            border: 1px solid #ccc;
        }

        .tab:hover {
            background-color: #ddd;
        }
        .logo {
            max-width: 100px;
            height: 100px;
        }
        .header {
            text-align: center;
            font-size: 24px;
        }
        .header-container {
            border: 2px solid #000;
            padding: 10px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            width: 98%;
        }
 
        #AnalyticsContent,
        #PredictionsContent,
        #filters {
            display: none;
        }

        #iframe {
            display: none;
        }
    </style>
</head>

<body>
    <input type="checkbox" id="check">
    <label for="check">
        <i class="fas fa-bars" id="btn"></i>
        <i class="fas fa-times" id="cancel"></i>
    </label>
    <div class="sidebar">
        <header>
            <a href="https://imgbb.com/">
                <img src="https://i.ibb.co/DKf23HJ/Screenshot-2023-11-15-132345-removebg-preview-1.png" alt="My App Logo" border="0">
                <span>Analytics Team</span>
            </a>
        </header>
        <ul>
            <li>
                <a href="" onclick="showSection('dashboard')">
                    <i class="fas fa-home"></i> Dashboard
                </a>
            </li>
            <li>
                <a href="#" onclick="showSection('analytics')">
                    <i class="fas fa-map"></i> Analytics
                </a>
            </li>
            <li>
                <a href="#" onclick="showSection('predictions')">
                    <i class="fas fa-route"></i> Predictions
                </a>
            </li>
            <li>
                <a href="#" onclick="showSection('settings')">
                    <i class="fas fa-cog"></i> Settings
                </a>
            </li>
            <li>
                <button class="navigation-button" onclick="logout()">
                    <i class="fas fa-sign-out-alt" style="margin-right: 16.9px;"></i> Logout
                </button>
            </li>            
        </ul>
    </div>

    <section id="dashboardSection">
        <a href="https://ibb.co/9bspgLc">
            <img src="https://i.ibb.co/8r6mspN/Screenshot-2023-11-15-131920.png" alt="Welcome Page" border="0" height="100%" width="100%;">
        </a>
    </section>

    <section id="analyticsSection">
        <div class="content" id="AnalyticsContent">
            <h2>Analytics Page</h2>
            <div class="filters">
                <form>
                    <label for="Location">Location:</label>
                    <select id="Location">
                        <option value="Canteen">Canteen</option>
                        <option value="Faculty">Faculty</option>
                        <option value="Halls">Halls</option>
                        <option value="Libraries">Libraries</option>
                    </select>
                    <br>
                    <label for="Crimes">Incident Types:</label>
                    <br>
                    <input type="checkbox" id="LostFound" name="LostFound" value="Lost and Found" checked>
                    <label for="LostFound">Lost and Found</label>
                    <br>
                    <input type="checkbox" id="StolenItems" name="StolenItems" value="Stolen Items">
                    <label for="StolenItems">Stolen Items</label>
                    <input type="checkbox" id="DamagedProperties" name="DamagedProperties" value="Damaged Properties">
                    <label for="DamagedProperties">Damaged Properties</label>
                    <br>
                    <input type="checkbox" id="SexualIncidents" name="SexualIncidents" value="Sexual Incidents">
                    <label for="SexualIncidents">Sexual Incidents</label>
                    <br>
                    <label for="FromDate">From Date:</label>
                    <input type="date" id="FromDate">
                    <br>
                    <label for="ToDate">To Date:</label>
                    <input type="date" id="ToDate">
                </form>
            </div>
            <div class="chart-container">
                <div id="chart1" class="chart"></div>
                <div id="chart2" class="chart"></div>
                <div id="chart3" class="chart"></div>
            </div>
        </div>
    </section>

    <section id="predictionsSection" style="display: none;">
        <h2>Predictions Page</h2>
        <iframe id="map" src="{{ url_for('static', filename='/heatmap.html') }}" width="100%" height="600"></iframe>
    </section>

    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
    <script>
        function showContent(tabName) {
            var i;
            var contents = document.getElementsByClassName("content");
            for (i = 0; i < contents.length; i++) {
                contents[i].style.display = "none";
            }

            document.getElementById(tabName + "Content").style.display = "block";
        }

        // Replace the following with your chart creation code
        function createCharts() {
            // Example data and chart creation code
            var data = [
                { Year: '2017', CrimeCount: 10 },
                { Year: '2018', CrimeCount: 12 },
                { Year: '2019', CrimeCount: 30 },
                { Year: '2020', CrimeCount: 25 },
                { Year: '2021', CrimeCount: 32 },
                { Year: '2022', CrimeCount: 18 },
                { Year: '2023', CrimeCount: 27 },
            ];

            var years = data.map(item => item.Year);
            var crimeCounts = data.map(item => item.CrimeCount);

            var data1 = [
                { Crime: 'Lost and Found', CrimeCount: 59 },
                { Crime: 'Assault', CrimeCount: 10 },
                { Crime: 'Theft', CrimeCount: 9 },
                { Crime: 'Harassment', CrimeCount: 5 },
            ];
            
            var data2 = [
                { Location: "UTown", CrimeCount: 21 },
                { Location: 'Frontier', CrimeCount: 10 },
                { Location: 'PGP', CrimeCount: 9 },
                { Location: 'Museum', CrimeCount: 5 },
            ];

            var years = data.map(item => item.Year);
            var crimeCounts = data.map(item => item.CrimeCount);
            var typesOfcrimes = data1.map(item => item.Crime);
            var crimeCounts1 = data1.map(item => item.CrimeCount);
            var crimesBylocation = data2.map(item => item.Location);
            var crimeCounts2 = data1.map(item => item.CrimeCount);

            var trace1 = {
                x: years,
                y: crimeCounts,
                type: 'line',
            };

            var trace2 = {
                x: typesOfcrimes,
                y: crimeCounts1,
                type: 'bar',
            };

            var trace3 = {
                y: crimesBylocation,  // Use 'y' for horizontal bars
                x: crimeCounts2,
                type: 'bar',
                orientation: 'h',  // Set the orientation to horizontal
                text: crimesBylocation.map(String),  // Display the crime counts as text on the bars
                textposition: 'inside',  // Position the text inside the bars
            };

            var layout = {
                title: 'Number of Crimes per Year',
                xaxis: {
                    title: 'Year',
                    dtick: 1
                },
                yaxis: {
                    title: 'Number of Crimes',
                    range: [0, Math.max(...crimeCounts)] // Set the y-axis range from 0 to the maximum value
                },
            }

            var layout1 = {
                title: 'Total incidents by Type',
                xaxis: {
                    title: 'Type of Crime',
                    dtick: 1
                },
                yaxis: {
                    title: 'Number of Crimes',
                    range: [0, Math.max(...crimeCounts)] // Set the y-axis range from 0 to the maximum value
                },
            }

            var layout2 = {
                title: 'Number of Crimes by Location',
                xaxis: {
                    title: 'Number of Crimes',
                },
                yaxis: {
                    showticklabels: false
                },
            }
            Plotly.newPlot('chart1', [trace1], layout);
            Plotly.newPlot('chart2', [trace2], layout1);
            Plotly.newPlot('chart3', [trace3], layout2);
        }

        // Call createCharts when the Analytics tab is clicked
        document.querySelector('.tab').addEventListener('click', function () {
            createCharts();
        });

        document.getElementById('AnalyticsContent').style.display = 'block';

        function showContent(tabName) {
            if (tabName === 'Analytics') {
                document.getElementById('AnalyticsContent').style.display = 'block';
                document.getElementById('PredictionsContent').style.display = 'none';
            } else if (tabName === 'Predictions') {
                document.getElementById('AnalyticsContent').style.display = 'none';
                document.getElementById('PredictionsContent').style.display = 'block';
            }
        }

        function showSection(sectionId) {
        const sections = document.querySelectorAll('section');
        sections.forEach(section => {
            if (section.id === sectionId + 'Section') {
            section.style.display = 'block';
            } else {
            section.style.display = 'none';
            }
        });
        }

        function logout() {
            // Redirect to the home page URL
            window.location.href = '/';
        }
    </script>
</body>
</html>
